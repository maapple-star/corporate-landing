---
interface Props {
  id: string;
  title: string;
  description: string;
  modalDescription?: string;
  icon?: string;
  features?: string[];
  benefits?: string[];
  quoteHref?: string;
}

const {
  id,
  title,
  description,
  modalDescription,
  icon,
  features,
  benefits,
  quoteHref = "#contact",
} = Astro.props;
---

<div
  id={id}
  class="svc-modal-overlay fixed inset-0 z-999 flex items-center justify-center p-4 opacity-0 pointer-events-none transition-opacity duration-200"
  role="dialog"
  aria-modal="true"
  aria-label={title}
>
  {/* Backdrop */}
  <div
    class="svc-modal-backdrop absolute inset-0 bg-dark/80 backdrop-blur-sm"
    data-modal-close={id}
  >
  </div>

  {/* Panel */}
  <div
    class="svc-modal-panel relative w-full max-w-[480px] max-h-[90vh] overflow-hidden bg-white shadow-[0_0_60px_rgba(30,58,138,0.08)] translate-y-4 transition-transform duration-200 border-blue2 flex flex-col"
  >
    {/* Header */}
    <div class="relative shrink-0 bg-blue border-b border-[#e2e8f0] p-6 overflow-hidden">
      {/* Blue top accent */}
      <!-- <div
        class="absolute top-0 left-0 right-0 h-[2px] bg-linear-to-r from-blue2 via-blue2/60 to-transparent"
      >
      </div> -->

      <div class="flex items-start gap-4">
        {/* Icon */}
        <div
          class="shrink-0 w-12 h-12 bg-blue-light border rounded-full border-[#e2e8f0] flex items-center justify-center relative"
        >
          <div class="absolute inset-0 bg-linear-to-br from-blue2/10 to-transparent"></div>
          {
            icon ? (
              <span class="text-blue2 text-xl relative z-1" set:html={icon} />
            ) : (
              <svg
                class="text-blue2 relative z-1"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <>
                  <rect x="2" y="3" width="20" height="14" rx="1" />
                  <path d="M8 21h8M12 17v4" />
                </>
              </svg>
            )
          }
        </div>
        {/* Title & description */}
        <div class="flex-1 min-w-0 pr-8">
          <h3 class="font-syne text-white text-[1rem] font-bold leading-[1.2] mb-3">
            {title}
          </h3>
          <p class="text-[0.8rem] text-white/75 leading-[1.7]">
            {modalDescription || description}
          </p>
        </div>
      </div>

      {/* Close */}
      <button
        class="absolute top-4 right-4 w-7 h-7 flex items-center justify-center text-mid hover:text-blue2 border border-transparent hover:border-[#e2e8f0] transition-colors duration-150"
        data-modal-close={id}
        aria-label="Close"
      >
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path
            d="M1 1l12 12M13 1L1 13"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"></path>
        </svg>
      </button>
    </div>

    {/* Body */}
    <div class="p-6 space-y-6 flex-1 overflow-y-auto scroll-shadow-mask" data-shadow="both">
      {/* Features */}
      {
        features && features.length > 0 && (
          <div>
            <div class="inline-flex items-center gap-2 mb-4">
              <span class="text-[0.6rem] font-syne tracking-[0.2em] uppercase text-blue2 border border-[#e2e8f0] px-3 py-1 bg-blue-pale">
                Features
              </span>
              <div class="h-px w-8 bg-linear-to-r from-blue2/40 to-transparent" />
            </div>
            <ul class="space-y-[10px]">
              {features.map((feat) => (
                <li class="flex items-start gap-3 group">
                  <span class="shrink-0 mt-[1px] w-5 h-5 flex items-center justify-center border border-[#e2e8f0] bg-blue-light group-hover:border-blue2/40 transition-colors duration-150">
                    <svg width="9" height="9" viewBox="0 0 9 9" fill="none">
                      <path
                        d="M1.5 4.5l2.5 2.5 3.5-4"
                        stroke="var(--color-blue2)"
                        stroke-width="1.2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </span>
                  <span class="text-[0.8rem] text-dark leading-[1.6]">{feat}</span>
                </li>
              ))}
            </ul>
          </div>
        )
      }

      {/* Benefits */}
      {
        benefits && benefits.length > 0 && (
          <div>
            <div class="inline-flex items-center gap-2 mb-4">
              <span class="text-[0.6rem] font-syne tracking-[0.2em] uppercase text-blue3 border border-blue3/20 px-3 py-1 bg-blue-light">
                Benefits
              </span>
              <div class="h-px w-8 bg-linear-to-r from-blue3/40 to-transparent" />
            </div>
            <ul class="space-y-[10px]">
              {benefits.map((benefit) => (
                <li class="flex items-start gap-3 group">
                  <span class="shrink-0 mt-[1px] w-5 h-5 flex items-center justify-center border border-blue3/20 bg-blue-light group-hover:border-blue3/40 transition-colors duration-150">
                    <svg width="9" height="9" viewBox="0 0 9 9" fill="none">
                      <path
                        d="M1.5 4.5l2.5 2.5 3.5-4"
                        stroke="var(--color-blue3)"
                        stroke-width="1.2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </span>
                  <span class="text-[0.8rem] text-dark leading-[1.6]">{benefit}</span>
                </li>
              ))}
            </ul>
          </div>
        )
      }
    </div>

    {/* Footer */}
    <div class="px-6 pb-6 flex gap-3 shrink-0">
      <a
        href={quoteHref}
        class="btn-primary flex-1 justify-center text-[0.8rem]"
        data-modal-close={id}
      >
        Get a Quote
        <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
          <path
            d="M2 6h8M6 2l4 4-4 4"
            stroke="currentColor"
            stroke-width="1.2"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </svg>
      </a>
      <button
        class="flex-1 justify-center inline-flex items-center gap-2 border border-[#e2e8f0] text-mid py-[14px] px-8 text-[0.85rem] transition-colors duration-200 hover:border-blue2 hover:text-blue2 cursor-pointer bg-transparent"
        data-modal-close={id}
      >
        Close
      </button>
    </div>
  </div>
</div>

<style>
  .svc-modal-overlay.is-open {
    opacity: 1;
    pointer-events: auto;
  }
  .svc-modal-overlay.is-open .svc-modal-panel {
    transform: translateY(0);
  }
</style>
